pipeline {
  agent {
    docker {
      image 'node:8.11.4'
      args '-u 0:0'
    }
  }

  stages {

    stage ('Build') {
      steps {
        sh 'node --version; npm --version'
        sh 'npm install'
        sh 'ls -la ./node_modules'
        sh './node_modules/.bin/bower install --allow-root'
      }
    }

    stage ('Test') {
      steps {
        script {
          sh "./node_modules/.bin/eslint --ext .js src/"
        }
      }
    }
  }
}